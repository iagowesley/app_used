{
  "info": {
    "name": "API Used - An√∫ncios",
    "description": "Collection completa para testar a API de an√∫ncios do projeto Used",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "COLE_SEU_USER_ID_AQUI",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "1Ô∏è‚É£ Criar An√∫ncio (POST)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"nome\": \"Bicicleta Caloi Aro 26\",\n  \"descricao\": \"Bicicleta usada em √≥timo estado, apenas alguns arranh√µes na pintura. Funcionando perfeitamente. Sem marchas, freios em bom estado.\",\n  \"preco\": \"350.50\",\n  \"whatsapp\": \"11 9 8765-4321\",\n  \"user_id\": \"{{user_id}}\",\n  \"imagens_urls\": [\n    \"https://exemplo.com/img1.jpg\",\n    \"https://exemplo.com/img2.jpg\",\n    \"https://exemplo.com/img3.jpg\"\n  ]\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{base_url}}/api/anuncios",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "anuncios"
          ]
        },
        "description": "üî• **USE ESTA REQUISI√á√ÉO PARA TESTAR BREAKPOINTS!**\n\nCria um novo an√∫ncio no sistema.\n\n**Breakpoints recomendados:**\n- Linha 11: In√≠cio da fun√ß√£o\n- Linha 17: Dados recebidos\n- Linha 49: Antes de sanitizar\n- Linha 80: Antes de inserir no banco\n- Linha 102: Sucesso\n\n**Campos obrigat√≥rios:**\n- nome (m√≠nimo 3 caracteres)\n- descricao (m√≠nimo 10 caracteres)\n- preco (n√∫mero positivo)\n- whatsapp (formato: XX X XXXX-XXXX)\n- user_id (UUID v√°lido do Supabase)\n- imagens_urls (array com 3 a 6 URLs)"
      },
      "response": [
        {
          "name": "Sucesso (201)",
          "originalRequest": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nome\": \"Bicicleta Caloi Aro 26\",\n  \"descricao\": \"Bicicleta usada em √≥timo estado\",\n  \"preco\": \"350.50\",\n  \"whatsapp\": \"11 9 8765-4321\",\n  \"user_id\": \"123abc\",\n  \"imagens_urls\": [\"url1\", \"url2\", \"url3\"]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/anuncios",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "anuncios"
              ]
            }
          },
          "status": "Created",
          "code": 201,
          "_postman_previewlanguage": "json",
          "header": [],
          "cookie": [],
          "body": "{\n  \"mensagem\": \"an√∫ncio criado com sucesso\",\n  \"produto\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"nome\": \"bicicleta caloi aro 26\",\n    \"descricao\": \"bicicleta usada em √≥timo estado\",\n    \"preco\": 350.5,\n    \"user_id\": \"123abc\",\n    \"imagens\": [\"url1\", \"url2\", \"url3\"],\n    \"whatsapp\": \"11 9 8765-4321\",\n    \"created_at\": \"2025-11-03T10:30:00.000Z\"\n  }\n}"
        },
        {
          "name": "Erro - Campos obrigat√≥rios (400)",
          "originalRequest": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nome\": \"Bicicleta\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/anuncios",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "anuncios"
              ]
            }
          },
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "header": [],
          "cookie": [],
          "body": "{\n  \"erro\": \"todos os campos s√£o obrigat√≥rios\"\n}"
        }
      ]
    },
    {
      "name": "2Ô∏è‚É£ Listar Todos os An√∫ncios (GET)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/anuncios",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "anuncios"
          ]
        },
        "description": "Lista todos os an√∫ncios cadastrados, ordenados do mais recente para o mais antigo.\n\n**Retorna:**\n- Array com todos os produtos\n- Ordena√ß√£o: created_at DESC"
      },
      "response": [
        {
          "name": "Sucesso (200)",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/anuncios",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "anuncios"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [],
          "cookie": [],
          "body": "[\n  {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"nome\": \"bicicleta caloi aro 26\",\n    \"descricao\": \"bicicleta usada em √≥timo estado\",\n    \"preco\": 350.5,\n    \"user_id\": \"123abc\",\n    \"imagens\": [\"url1\", \"url2\", \"url3\"],\n    \"whatsapp\": \"11 9 8765-4321\",\n    \"created_at\": \"2025-11-03T10:30:00.000Z\"\n  },\n  {\n    \"id\": \"660e8400-e29b-41d4-a716-446655440001\",\n    \"nome\": \"notebook dell\",\n    \"descricao\": \"notebook usado, funciona perfeitamente\",\n    \"preco\": 1200,\n    \"user_id\": \"456def\",\n    \"imagens\": [\"url4\", \"url5\", \"url6\"],\n    \"whatsapp\": \"11 9 1234-5678\",\n    \"created_at\": \"2025-11-02T15:20:00.000Z\"\n  }\n]"
        }
      ]
    },
    {
      "name": "3Ô∏è‚É£ Buscar An√∫ncio por ID (GET)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/anuncios/COLE_O_ID_AQUI",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "anuncios",
            "COLE_O_ID_AQUI"
          ]
        },
        "description": "Busca um an√∫ncio espec√≠fico pelo ID.\n\n**Como usar:**\n1. Ap√≥s criar um an√∫ncio (requisi√ß√£o 1), copie o ID retornado\n2. Substitua \"COLE_O_ID_AQUI\" na URL pelo ID copiado\n3. Envie a requisi√ß√£o\n\n**Retorna:**\n- Objeto com os dados do produto"
      },
      "response": [
        {
          "name": "Sucesso (200)",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/anuncios/550e8400-e29b-41d4-a716-446655440000",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "anuncios",
                "550e8400-e29b-41d4-a716-446655440000"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [],
          "cookie": [],
          "body": "{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"nome\": \"bicicleta caloi aro 26\",\n  \"descricao\": \"bicicleta usada em √≥timo estado\",\n  \"preco\": 350.5,\n  \"user_id\": \"123abc\",\n  \"imagens\": [\"url1\", \"url2\", \"url3\"],\n  \"whatsapp\": \"11 9 8765-4321\",\n  \"created_at\": \"2025-11-03T10:30:00.000Z\"\n}"
        },
        {
          "name": "N√£o encontrado (404)",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/anuncios/id-inexistente",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "anuncios",
                "id-inexistente"
              ]
            }
          },
          "status": "Not Found",
          "code": 404,
          "_postman_previewlanguage": "json",
          "header": [],
          "cookie": [],
          "body": "{\n  \"erro\": \"No rows found\"\n}"
        }
      ]
    },
    {
      "name": "4Ô∏è‚É£ Atualizar An√∫ncio (PUT)",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"preco\": \"320.00\",\n  \"descricao\": \"bicicleta usada, pre√ßo negoci√°vel! aceito propostas.\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{base_url}}/api/anuncios/COLE_O_ID_AQUI",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "anuncios",
            "COLE_O_ID_AQUI"
          ]
        },
        "description": "Atualiza um an√∫ncio existente.\n\n**Como usar:**\n1. Substitua \"COLE_O_ID_AQUI\" pelo ID do an√∫ncio\n2. No body, envie apenas os campos que quer atualizar\n3. Envie a requisi√ß√£o\n\n**Campos atualiz√°veis:**\n- nome\n- descricao\n- preco\n- whatsapp\n- imagens"
      },
      "response": [
        {
          "name": "Sucesso (200)",
          "originalRequest": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"preco\": \"320.00\",\n  \"descricao\": \"bicicleta usada, pre√ßo negoci√°vel!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/anuncios/550e8400-e29b-41d4-a716-446655440000",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "anuncios",
                "550e8400-e29b-41d4-a716-446655440000"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [],
          "cookie": [],
          "body": "{\n  \"mensagem\": \"an√∫ncio atualizado com sucesso\",\n  \"produto\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"nome\": \"bicicleta caloi aro 26\",\n    \"descricao\": \"bicicleta usada, pre√ßo negoci√°vel!\",\n    \"preco\": 320,\n    \"user_id\": \"123abc\",\n    \"imagens\": [\"url1\", \"url2\", \"url3\"],\n    \"whatsapp\": \"11 9 8765-4321\",\n    \"created_at\": \"2025-11-03T10:30:00.000Z\"\n  }\n}"
        }
      ]
    },
    {
      "name": "5Ô∏è‚É£ Deletar An√∫ncio (DELETE)",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/anuncios/COLE_O_ID_AQUI",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "anuncios",
            "COLE_O_ID_AQUI"
          ]
        },
        "description": "Deleta um an√∫ncio permanentemente.\n\n**‚ö†Ô∏è ATEN√á√ÉO:** Esta a√ß√£o n√£o pode ser desfeita!\n\n**Como usar:**\n1. Substitua \"COLE_O_ID_AQUI\" pelo ID do an√∫ncio\n2. Envie a requisi√ß√£o\n3. O an√∫ncio ser√° removido do banco de dados"
      },
      "response": [
        {
          "name": "Sucesso (200)",
          "originalRequest": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/anuncios/550e8400-e29b-41d4-a716-446655440000",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "anuncios",
                "550e8400-e29b-41d4-a716-446655440000"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [],
          "cookie": [],
          "body": "{\n  \"mensagem\": \"an√∫ncio deletado com sucesso\"\n}"
        }
      ]
    },
    {
      "name": "üß™ Teste - Valida√ß√£o Nome Curto",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"nome\": \"Bi\",\n  \"descricao\": \"Bicicleta usada em √≥timo estado, apenas alguns arranh√µes na pintura.\",\n  \"preco\": \"350.50\",\n  \"whatsapp\": \"11 9 8765-4321\",\n  \"user_id\": \"{{user_id}}\",\n  \"imagens_urls\": [\n    \"https://exemplo.com/img1.jpg\",\n    \"https://exemplo.com/img2.jpg\",\n    \"https://exemplo.com/img3.jpg\"\n  ]\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{base_url}}/api/anuncios",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "anuncios"
          ]
        },
        "description": "Teste de valida√ß√£o: nome com menos de 3 caracteres.\n\n**Resultado esperado:** Erro 400 - \"nome do produto deve ter pelo menos 3 caracteres\""
      },
      "response": []
    },
    {
      "name": "üß™ Teste - Valida√ß√£o WhatsApp Inv√°lido",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"nome\": \"Bicicleta Caloi\",\n  \"descricao\": \"Bicicleta usada em √≥timo estado, apenas alguns arranh√µes na pintura.\",\n  \"preco\": \"350.50\",\n  \"whatsapp\": \"11 9876\",\n  \"user_id\": \"{{user_id}}\",\n  \"imagens_urls\": [\n    \"https://exemplo.com/img1.jpg\",\n    \"https://exemplo.com/img2.jpg\",\n    \"https://exemplo.com/img3.jpg\"\n  ]\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{base_url}}/api/anuncios",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "anuncios"
          ]
        },
        "description": "Teste de valida√ß√£o: WhatsApp com formato inv√°lido.\n\n**Resultado esperado:** Erro 400 - \"por favor, insira um whatsapp v√°lido (11 d√≠gitos)\""
      },
      "response": []
    },
    {
      "name": "üß™ Teste - Valida√ß√£o Poucas Imagens",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"nome\": \"Bicicleta Caloi\",\n  \"descricao\": \"Bicicleta usada em √≥timo estado, apenas alguns arranh√µes na pintura.\",\n  \"preco\": \"350.50\",\n  \"whatsapp\": \"11 9 8765-4321\",\n  \"user_id\": \"{{user_id}}\",\n  \"imagens_urls\": [\n    \"https://exemplo.com/img1.jpg\"\n  ]\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{base_url}}/api/anuncios",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "anuncios"
          ]
        },
        "description": "Teste de valida√ß√£o: menos de 3 imagens.\n\n**Resultado esperado:** Erro 400 - mensagem sobre quantidade m√≠nima de imagens"
      },
      "response": []
    }
  ]
}

